<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Email Data Point Retriever</title>
		<link rel="stylesheet" href="retriever.css">
		<script src='js/jquery-1.10.2.min.js' type='text/javascript'></script>
		<script src='js/retriever.js' type='text/javascript'></script>
		<script type='text/javascript'>
			var id = $.getUrlVar('s');
			if (id == undefined || id == null || id == "") {
				window.location = "consent.html";
			}
		</script>
	</head>
	
	<body>
		<div class="center" id="retriever">
			<h1>Email Data Point Retriever</h1>
			<p>
				This tool collects anonymized email data for research purposes.
				We are working to study different how people communicate via threads and how we can predict when threads will receive a reply.
				Thank you for participating
			</p>
			<p>
				We will only retrieve the data about from, to, cc, bcc, subjects and threads information from your messages.
				We will <b>NOT</b> collect the content of your messages.
				After you retrieve your data, 
				you will be able to modify and confirm what is stored by the researchers to ensure it is properly anonymized.
				During the review of your data, you will be able to remove part or all of your data.
			</p>
			<p>
				If you would prefer to collect all data locally on your machine, and then choose what to send us at the end, we have a desktop app 
				<a href='EmailDataRetrieverGUI.jar'>here.</a>
			</p>
			<div class='section-border'>
			<div class='section-label'><strong>Credentials</strong></div>
			<div id="retriever-form">
				<table>
					<tr>
						<td>IMAP Server</td>
						<td class='email-input'><select id='imap' >
								<option>imap.gmail.com</option>
						</select></td>
					</tr>
					<tr>
						<td>Email or Username</td>
						<td class='email-input'><input id='username' ></input></td>
					</tr>
					<tr>
						<td>Password</td>
						<td class='email-input'><input id='password' type="password" ></input></td>
					</tr>
				</table>
				<div class='section-border' style='border-width: 0px'>
					<strong>Collection Settings</strong>
					<table class='settings'>
					<tr>
						<td>
						Max messages:
						<input class='setting short-input' type="number" id="messages" min="1" value="2000">
						</td>
						
						<td>
						Max threads:
						<input class='setting short-input' type="number" id="threads" min="1" value="400">
						</td>
					</tr>
					</table>
					<div class='settings'>
						<input class='setting checkbox' type="checkbox" id="subjects" value="include">
						<label for='subjects'>Include subjects</label>
					</div>
					<div class='settings'>
						<input class='setting checkbox' type="checkbox" id="addresses" value="include">
						Include email addresses
					</div>
					<table class='settings'>
					<tr>
						<td>
						<input class='setting checkbox' type="checkbox" id="numAttach" value="include" onclick='switchFileNamesEnabled()'>
						Include number of attachments
						</td>
						
						<td>
						<input class='setting checkbox' type="checkbox" id="fileNames" value="include" disabled='true'>
						<span id='fileNamesLabel'>Include file names of attachments</span>
						</td>
					</tr>
					</table>
				</div>
				<div class="collector-button">
					<input type="submit" value="Start collecting data" onclick="testAuthentication()"/>
				</div>
			</div>
		</div>
		</div>
	</body>
</html>
		